// Core part of Redrawn
const RPC = require("discord-rpc");
require("./server");


// Loads env.json for Redrawn version and build number
const env = Object.assign(process.env,
	require('./env'));
// env.json variables
let version = env.WRAPPER_VER;
let build = env.WRAPPER_BLD;


// Discord rich presence
const rpc = new RPC.Client({
	transport: "ipc"
});
rpc.on("ready", () => {
	// Sets RPC activity
	rpc.setActivity({
		state: "Making videos...",
		details: "Version " + version +", build " + build + " (Closed Beta)",
		startTimestamp: new Date(),
		largeImageKey: "icon",
		largeImageText: "Redrawn",
		smallImageKey: "Redrawn",
		smallImagetext: "Redrawn",
		
	});
	// Logs "Rich presence is on!" in the console
	console.log("Redrawn is now broadcasting on your Discord account!")
});
// Connects RPC to app
rpc.login({
		clientId: "968661897295564820"
	}).catch((err) => console.log('RPC connection failed.'));

