var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

(function(f){var e=null;var d=function(){var l=this;var m="/ajax/getCollaboratorCandidates";f.getJSON(m,function(n){if(n.suc){l.invite_candidates=n.candidates}else{l.invite_candidates=[]}if(f('input[name="user_token"]').data("bs.tokenfield")){f(this).tokenfield("destroy")}f('input[name="user_token"]').val("").on("tokenfield:preparetoken",function(p){var q=l.invite_candidates,o;if(!l.isEmail(p.token.value)){for(o in q){if(p.token.value==q[o].label){p.token.value=q[o].value;p.token.label=q[o].label;return}}}else{for(o in q){if(p.token.value==q[o].value){p.token.label=q[o].label;return}}}}).on("tokenfield:createtoken",function(q){if("producer"==f(q.target).parents("form").find('[name="role"]').val()){var r=l.invite_candidates,p=false,o;for(o in r){if(q.token.value==r[o].value){p=true;break}}if(!p){f(q.relatedTarget).addClass("invalid")}else{f(q.relatedTarget).addClass("valid")}}else{if(!l.isEmail(q.token.value)){f(q.relatedTarget).addClass("invalid")}else{f(q.relatedTarget).addClass("valid")}}f(".token-input").attr("placeholder","")}).on("tokenfield:startedit",function(p){var o=f.Event("change");o.initiator="tokenfield";f(p.target).trigger(o)}).on("tokenfield:removetoken",function(o){f(o.target).trigger("change");if(f(this).tokenfield("getTokens").length===0){f(".token-input").attr("placeholder","Enter email(s)")}}).on("change",function(o){f(o.target).parents(".form-row").removeClass("error");if(f(o.target).val()){if(0===f(o.target).tokenfield("getTokens",".invalid").length){f(o.target).parents("form").find('[type="submit"]').prop("disabled",false)}else{f(o.target).parents("form").find('[type="submit"]').prop("disabled",true);f(o.target).parents(".form-row").addClass("error")}}else{f(o.target).parents("form").find('[type="submit"]').prop("disabled",true)}}).tokenfield({createTokensOnBlur:true,beautify:false,autocomplete:{source:function(q,p){var o=[];f.each(l.invite_candidates,function(r,s){if((0<=s.label.toLowerCase().search(q.term.toLowerCase()))||(0<=s.value.toLowerCase().search(q.term.toLowerCase()))){o.push(s)}});p(o)},delay:100},showAutocompleteOnFocus:true});f("#invite-form").on("submit",function(q){q.preventDefault();var o=f(this).find('input[name="movie-privacy"]').val();var p=f(this).find('input[name="role"]').val();if((p==="watch-only")&&(o==="draft")){f("#share-draft-modal").modal("toggle")}else{l.invite()}});f('[data-action="confirm-share"]').on("click",function(){f('.set-privacy[data-privacy="unlisted"]').click();l.invite();f("#share-draft-modal").modal("toggle")});f('select[name="role"]').on("change",function(){$this.find(".modal-form").removeClass("modal-producer modal-reviewer").addClass("modal-"+f(this).val());$this.find('input[name="user_token"]').tokenfield("setTokens",$this.find('input[name="user_token"]').tokenfield("getTokens"))});f("#collaborator-role").on("click","li",function(){if(f(this).hasClass("disabled")){return}var p=f(this).data("role");var o=f(this).find(".name").text();f('#permission-dropdown input[name="role"]').val(p);f("#permission-dropdown .role-display").text(o);f("#invite-form").find('[type="submit"]').attr("disabled",false);f('input[name="user_token"]').trigger("change")})})};d.prototype.isEmail=function(m){var l=/[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return l.test(m)};d.prototype.invite=function(){var l=f('#invite-form input[name="role"]').val();if(l==="watch-only"){this.inviteWatchers()}else{this.inviteCollaborators()}};d.prototype.inviteWatchers=function(){var l=this;var n=f("#invite-form");n.find('[type="submit"]').attr("value","Sending").addClass("disabled");var m=n.serialize();m=m+"&ct="+encodeURIComponent(e);f.post("/ajax/inviteWatchers",m,function(o){n.find('[type="submit"]').attr("value","Send").removeClass("disabled");if(o.error){showNotice(o.error,true);return}showNotice(o.msg);n.find('input[name="raw_user_token"]').val("").end().find('[name="message"]').val("").end().find('input[name="user_token"]').val("").end().find(".token").remove().end().find('[type="submit"]').attr("value","Send").removeClass("disabled")})};d.prototype.inviteCollaborators=function(){var l=this;var n=l.invite_candidates;var p=[];var o=f("#invite-form");f.each(o.find('input[name="user_token"]').tokenfield("getTokens",".valid"),function(q,t){var s=false;for(var r in n){if(t.value==n[r].value){p.push(n[r].b_value);s=true;break}}if(!s){p.push(t.value)}});o.find('input[name="raw_user_token"]').val(p.join(","));o.find('[type="submit"]').attr("value","Sending").addClass("disabled");var m=o.serialize();m=m+"&ct="+encodeURIComponent(e);f.post("/ajax/inviteCollaborators",m,function(q){o.find('[type="submit"]').attr("value","Send").removeClass("disabled");if(q.error){showNotice(q.error,true);return}showNotice(q.msg);o.find('input[name="raw_user_token"]').val("").end().find('[name="message"]').val("").end().find('input[name="user_token"]').val("").tokenfield("setTokens",true,false);f(document).trigger("collaborator-change")},"json")};var j=function(l){var m=this;this.$el=l;this.removeAlert=GT.gettext("Are you sure you want to prevent this person from collaborating on this video?");this.removeAlert+="\n\n";this.removeAlert+=GT.gettext("Unless the video is published, this person will not be able to view the video anymore.");this.processing=false;this.$el.on("submit",".js-update-collaborators",function(p){var o=f(this);p.preventDefault();var n=o.serialize();n=n+"&ct="+encodeURIComponent(e);m.save(n)}).on("click",".js-remove-collaborator",function(q){q.preventDefault();if(!confirm(m.removeAlert)){return}var p=f(this).tooltip("destroy"),o=p.closest(".form-group"),n=o.find("select").attr("name"),r=f("<input>",{type:"hidden",name:n,value:"delete"});o.replaceWith(r)})};j.prototype=f.extend({},ModalBase.prototype,{save:function(m){var l=this;if(this.processing){return}this.processing=true;f.post("/ajax/updateCollaborators",m,function(n){l.processing=false;if(n.error){return}f(document).trigger("collaborator-change");l.$el.modal("hide")},"json")}});var h=function(l){var m=this;this.$el=l;this.$el.on("submit","#movie-license-form",function(n){n.preventDefault();if(m.validateAddressForm()){m.setLicense(f(this).serialize())}}).on("click",'[data-action="buttonControl"]',function(o){var n=f(this);o.preventDefault();m.buttonControl(n.data("hide"),n.data("show"))}).on("change",'[name="cbo_country"]',function(){m.resetState()}).on("change",'[name="license_type"]',function(){m.toggleCompanyInput()}).on("loaded",function(){m.resetState()})};h.sCountryWithoutZipCodeString="Afghanistan|Angola|Antigua and Barbuda|Aruba|Bahamas|Belize|Benin|Bhutan|Botswana|Burkina Faso|Burundi|Cameroon|Central African Republic|Comoros|Congo|Congo, The Democratic Republic of|Cook Islands|CÃ´te d'Ivoire|Djibouti|Dominica|Equatorial Guinea|Eritrea|Fiji|Gambia|Gibraltar|Grenada|Guinea|Guyana|Hong Kong|Iceland|Kiribati|Korea, Democratic People's Republic of|Macao|Malawi|Mali|Mauritania|Mauritius|Montserrat|Namibia|Nauru|Netherlands Antilles|Niue|Panama|Qatar|Rwanda|Saint Kitts and Nevis|Saint Lucia|Saint Vincent and The Grenadines|Seychelles|Sierra Leone|Solomon Islands|Somalia|Suriname|Tanzania, United Republic of|Tokelau|Tonga|Trinidad and Tobago|Tuvalu|Uganda|United Arab Emirates|Vanuatu|Yemen|Zimbabwe";h.aCountryWithoutZipCode=h.sCountryWithoutZipCodeString.split("|");h.sCanadaStatesString="Alberta|British Columbia|Manitoba|New Brunswick|Newfoundland|Northwest Territories|Nova Scotia|Nunavut|Ontario|Prince Edward Island|Quebec|Saskatchewan|Yukon Territory";h.aCanadaStates=h.sCanadaStatesString.split("|");h.sCanadaStatesCodeString="AB|BC|MB|NB|NL|NT|NS|NU|ON|PE|QC|SK|YT";h.aCanadaStatesCode=h.sCanadaStatesCodeString.split("|");h.sUSAStatesString="Alabama|Alaska|Arizona|Arkansas|California|Colorado|Connecticut|Delaware|District of Columbia|Florida|Georgia|Hawaii|Idaho|Illinois|Indiana|Iowa|Kansas|Kentucky|Louisiana|Maine|Maryland|Massachusetts|Michigan|Minnesota|Mississippi|Missouri|Montana|Nebraska|Nevada|New Hampshire|New Jersey|New Mexico|New York|North Carolina|North Dakota|Ohio|Oklahoma|Oregon|Pennsylvania|Rhode Island|South Carolina|South Dakota|Tennessee|Texas|Utah|Vermont|Virginia|Washington|West Virginia|Wisconsin|Wyoming|Armed Forces Americas|Armed Forces|Armed Forces Pacific";h.aUSAStates=h.sUSAStatesString.split("|");h.sUSAStatesCodeString="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY|AA|AE|AP";h.aUSAStatesCode=h.sUSAStatesCodeString.split("|");h.prototype=f.extend({},ModalBase.prototype,{setLicense:function(m){var l=this;this.loading();f.post("/ajax/manageMovieOwner/set",m,function(n){l.loading();if(n.error){l.alert(n.error,"error")}else{if(l.$el.find("#preview_license").length>0){l.previewLicense();l.buttonControl("#transfer_rights_form","#preview_license")}else{l.buttonControl("#transfer_rights_form","#ending")}}},"json")},buttonControl:function(m,l){this.$el.find(m).hide();this.$el.find(l).show();if(l=="#ending"||l=="#failure"){this.$el.find(".movie_license_header").hide()}else{this.$el.find(".movie_license_header").show()}},resetState:function(){var m=this;var n=this.$el.find("#cboCountry").val();var l=this.$el.find("#user_state").val();if(n=="US"){this.$el.find("#input-state").hide();this.$el.find("#input-state").val("");this.$el.find("#cboState").show();m.updateOptions(this.$el.find("#cboState"),h.aUSAStates,h.aUSAStatesCode);this.$el.find("#cboState").val(l)}else{if(n=="CA"){this.$el.find("#input-state").hide();this.$el.find("#input-state").val("");this.$el.find("#cboState").show();m.updateOptions(this.$el.find("#cboState"),h.aCanadaStates,h.aCanadaStatesCode);this.$el.find("#cboState").val(l)}else{this.$el.find("#input-state").show();this.$el.find("#cboState").hide()}}m.updateZip()},toggleCompanyInput:function(){var l=this.$el.find('[name="license_type"]:checked').val();if(l=="individual"){this.$el.find("#company_input").hide();this.$el.find('[name="company_name"]').val("")}else{if(l=="company"){this.$el.find("#company_input").show()}}},updateOptions:function(n,m,l){var o;if(n.prop){o=n.prop("options")}else{o=n.attr("options")}f("option",n).remove();f.each(m,function(p,q){o[o.length]=new Option(q,l[p])})},updateZip:function(){if(this.containsNoZip(this.$el.find("#cboCountry :selected").text())){this.$el.find("#fld_cczipcode").hide();this.$el.find("#cczipcode").val("00000")}else{if(this.$el.find("#cczipcode").val()=="00000"){this.$el.find("#cczipcode").val("")}this.$el.find("#fld_cczipcode").show()}},containsNoZip:function(m){for(var l=0;l<h.aCountryWithoutZipCode.length;l++){if(h.aCountryWithoutZipCode[l]===m){return true}}return false},validateAddressForm:function(){this.$el.find(".help-block").remove();this.$el.find(".form-group").removeClass("has-error");var r=[];var l=this.$el.find('[name="company_name"]').val();var q=this.$el.find('[name="contact_person"]').val();var n=this.$el.find('[name="license_type"]:checked').val();var m=this.$el.find('[name="email"]').val();if(n=="company"){if(l===""){r.push({id:"#fld_company_name",msg:GT.gettext("Please input your company name")})}}if(q===""){r.push({id:"#fld_contact_person",msg:GT.gettext("Please input the name of your contact person")})}if(m!==""){if(!m.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)){r.push({id:"#fld_email",msg:GT.gettext("Invalid email")})}}var p;for(var o=0;o<r.length;o++){p=f(r[o].id).closest(".form-group").addClass("has-error").find(".help");if(r[o].msg.length){p.append(f('<div class="help-block" />').text(r[o].msg))}}if(r.length>0){return false}else{return true}},previewLicense:function(){var m="",l=this.$el.find('[name="license_type"]:checked').val();if(l==="company"){m=this.$el.find('[name="company_name"]').val()}else{m=this.$el.find('[name="contact_person"]').val()}this.$el.find(".b_contact").text(m)},paymentConfirmed:function(l){this.buttonControl("#payment_info","#payment_confirmation");this.$el.find("#payment_confirmation").empty().html(l.html)}});var k={};k.BaseClass=function(l,n){var m=this;this.successExportMessage=GT.gettext("Your video has been sent to the conversion queue and will be uploaded shortly.");this.errorExportMessage=GT.gettext("Video export request failed.");this.processing=false;this.$el=l;this.videoId=n;this.$el.on("click","[data-video-export]",function(o){o.preventDefault();m.triggerVideoExport(f(this))}).on("click",".message-button-holder > button",function(o){o.preventDefault();o.stopImmediatePropagation();m.$el.find(".toggle-content").removeClass("message toggle-on")}).on("documentClicked",function(q,r){var p=f(r.target),o=m.$el.find(".toggle-content");if(o.hasClass("toggle-on")&&!p.closest(m.$el).length){o.removeClass("toggle-on")}}).on("click",'[data-action="select-resolution"]',function(o){o.preventDefault();o.stopImmediatePropagation();m.$el.find(".resolution-option").hide();f(this).next("ul").show()})};k.BaseClass.prototype.showExportOptions=function(o){var m=this,l=this.$el.find(".toggle-content"),n=this.$el.find(".spin");if(this.processing){return}l.empty();if(!l.hasClass("toggle-on")){var p="/"+["ajax","getVideoExportOverlay",this.videoId,this.getServiceName(),"box"].join("/");this.processing=true;n.show();f.get(p,function(q){n.hide();l.addClass("toggle-on");m.processing=false;l.html(q);if(o){m.$el.find(".toggle-content .row-in-3, .toggle-content .row-in-4").hide().end().find(".toggle-content .reject-feedback").show()}}).fail(function(){m.processing=false})}};k.BaseClass.prototype.triggerVideoExport=function(l){var m=this,n=l.attr("href");if(this.processing){return}this.processing=true;l.find(".icon").html('<span class="processing"></span>');n=n+"&ct="+encodeURIComponent(e);f.get(n,function(o){m.processing=false;if(o.error){m.videoExportRequestCompleted(o.error);return}m.videoExportRequestCompleted(m.successExportMessage)},"json").fail(function(){m.processing=false;m.videoExportRequestCompleted(m.errorExportMessage)})};k.BaseClass.prototype.videoExportRequestCompleted=function(l){this.$el.find(".message").text(l);this.$el.find(".toggle-content .row-in-3, .toggle-content .row-in-4").hide().end().find(".toggle-content .ok-feedback").show()};k.BaseClass.prototype.start=function(){this.showExportOptions()};k.BaseConnectClass=function(l,n){k.BaseClass.call(this,l,n);var m=this;this.connected=this.$el.data("connected");this.$el.on("click",'[data-action="video-export-disconnect"]',function(o){o.preventDefault();o.stopImmediatePropagation();m.disconnectFrom3rdParty()}).on("connectSuccess",function(p,o){m.videoExportConnected(o)}).on("connectError",function(p,o){m.videoConnectError(o)})};k.BaseConnectClass.prototype=f.extend({},k.BaseClass.prototype);k.BaseConnectClass.prototype.start=function(){if(this.connected){this.showExportOptions()}else{this.connectTo3rdParty()}};k.BaseConnectClass.prototype.open3rdPartyConnectWindow=function(l){window.open(l,"_go_video_export","toolbar=no,status=no,height=650,width=960")};k.BaseConnectClass.prototype.connectTo3rdParty=function(){this.$connectModal=ModalBase.ensure("video-connect-"+this.getServiceName());var l=this.$connectModal.data("videoConnect");if(!l){l=new c(this.$connectModal);this.$connectModal.data("videoConnect",l)}l.load(this.getConnectUrl())};k.BaseConnectClass.prototype.disconnectFrom3rdParty=function(){var m=this;var l=this.getVideoResetUrl();f.get(l,function(n){m.videoExportDisconnected()})};k.BaseConnectClass.prototype.videoExportConnected=function(l){if(this.$connectModal){this.$connectModal.modal("hide")}this.connected=true;this.$el.data("connected",true).addClass("connected");this.showExportOptions();amplitudeTrackEvent(AMPLITUDE_EVENT.CONNECT_TO_3RD_PARTY,{service:this.getServiceName(),video_id:this.videoId,channel_url:null})};k.BaseConnectClass.prototype.videoExportDisconnected=function(){this.connected=false;this.$el.data("connected",false).removeClass("connected").find(".toggle-content .row-in-3, .toggle-content .row-in-4").hide().end().find(".toggle-content .disconnect-feedback").show();amplitudeTrackEvent(AMPLITUDE_EVENT.DISCONNECT_FROM_3RD_PARTY,{service:this.getServiceName()})};k.BaseConnectClass.prototype.videoConnectError=function(l){this.showExportOptions(true)};k.BaseConnectClass.prototype.getConnectUrl=function(){return"/"+["ajax","getVideoExportOverlay",this.videoId,this.getServiceName()].join("/")};k.BaseConnectClass.prototype.getVideoResetUrl=function(){throw new Error("Method not implemented")};k.Download=function(l,m){k.BaseClass.call(this,l,m);this.successExportMessage=GT.gettext("Your video has been sent to the conversion queue and we'll email you when it's ready for download.")};k.Download.prototype=f.extend({},k.BaseClass.prototype,{getServiceName:function(){if(isUsingLegacyPlayer()){return"download"}else{return"h5"}}});k.Presentation=function(l,m){k.BaseClass.call(this,l,m);this.successExportMessage=GT.gettext("Your video has been sent to the conversion queue and we'll email you when it's ready for download.")};k.Presentation.prototype=f.extend({},k.BaseClass.prototype,{getServiceName:function(){if(isUsingLegacyPlayer()){return"presentation"}else{return"h5presentation"}}});k.Gif=function(l,m){k.BaseClass.call(this,l,m);this.successExportMessage=GT.gettext("Your video has been sent to the conversion queue and we'll email you when it's ready for download.")};k.Gif.prototype=f.extend({},k.BaseClass.prototype,{getServiceName:function(){if(isUsingLegacyPlayer()){return"gif"}else{return"h5gif"}}});k.Youtube=function(l,n){k.BaseConnectClass.call(this,l,n);var m=this;this.$el.on("exportSuccess",function(p,o){m.videoExportRequestCompleted(m.successExportMessage)}).on("exportError",function(p,o){if(o.duplicated){m.videoExportRequestCompleted(m.successExportMessage)}else{m.videoExportRequestCompleted(o.error)}})};k.Youtube.prototype=f.extend({},k.BaseConnectClass.prototype,{triggerVideoExport:function(l){var m=l.attr("href");m=m+"&ct="+encodeURIComponent(e);this.open3rdPartyConnectWindow(m)},getServiceName:function(){if(isUsingLegacyPlayer()){return"youtube"}else{return"h5youtube"}}});k.Wistia=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Wistia.prototype=f.extend({},k.BaseConnectClass.prototype,{getVideoResetUrl:function(){return"/wistiaReset"},getServiceName:function(){if(isUsingLegacyPlayer()){return"wistia"}else{return"h5wistia"}}});k.Vimeo=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Vimeo.prototype=f.extend({},k.BaseConnectClass.prototype,{connectTo3rdParty:function(){this.open3rdPartyConnectWindow("/vimeoConnect")},getVideoResetUrl:function(){return"/vimeoReset"},getServiceName:function(){if(isUsingLegacyPlayer()){return"vimeo"}else{return"h5vimeo"}}});k.Vzaar=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Vzaar.prototype=f.extend({},k.BaseConnectClass.prototype,{getVideoResetUrl:function(){return"/vzaarReset"},getServiceName:function(){if(isUsingLegacyPlayer()){return"vzaar"}else{return"h5vzaar"}}});k.Viewbix=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Viewbix.prototype=f.extend({},k.BaseConnectClass.prototype,{getConnectUrl:function(){return"/ajax/getViewbixExportOverlay/"+this.videoId},getServiceName:function(){if(isUsingLegacyPlayer()){return"viewbix"}else{return"h5viewbix"}}});k.Lectora=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Lectora.prototype=f.extend({},k.BaseConnectClass.prototype,{getConnectUrl:function(){return"/ajax/getLectoraExportOverlay/"+this.videoId},getServiceName:function(){if(isUsingLegacyPlayer()){return"lectora"}else{return"h5lectora"}},getVideoResetUrl:function(){return"/lectoraReset"}});k.WeVideo=function(l,m){k.BaseConnectClass.call(this,l,m)};k.WeVideo.prototype=f.extend({},k.BaseConnectClass.prototype,{getVideoResetUrl:function(){return"/ajax/wevideo/logout"},getServiceName:function(){if(isUsingLegacyPlayer()){return"wevideo"}else{return"h5wevideo"}}});k.Vidyard=function(l,m){k.BaseConnectClass.call(this,l,m)};k.Vidyard.prototype=f.extend({},k.BaseConnectClass.prototype,{disconnectFrom3rdParty:function(){var m=this;var l=this.getVideoResetUrl();f.post(l,{"delete":1},function(n){m.videoExportDisconnected()},"json")},getVideoResetUrl:function(){return"/ajax/vidyardUpdateToken"},getServiceName:function(){if(isUsingLegacyPlayer()){return"vidyard"}else{return"h5vidyard"}}});var c=function(l,n){var m=this;this.$el=l;this.options=n;this.$el.on("click.video.goanimate",'[data-action="wistia-connect"]',function(p){var o=f(this);p.preventDefault();m.popWindow(o.data("url"))}).on("change.video.goanimate keyup.video.goanimate",'[data-action="wevideo-auth"] input[name="email"]',function(o){if(!m.$el.find(".wevideo-export-authorize-action span:visible").hasClass("wevideo-export-authorize-button")){m.$el.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-button").show()}}).on("submit.video.goanimate",'[data-action="wevideo-auth"]',function(p){var o=f(this);p.preventDefault();o.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-loading").show();f.ajax({type:"POST",url:o.attr("action"),data:o.serialize(),success:function(q){if(q.suc){o.parents(".modal-body").find(".pick-resolution .wevideo_email").text(o.find('input[name="email"]').val());o.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-message-success").show();m.$el.find('[data-action="wevideo-proceed-export"]').prop("disabled",false)}else{o.find(".wevideo-export-authorize-action").find("span").hide().end().find(".wevideo-export-authorize-message-fail").show()}},error:function(){m.alert(GT.gettext("Error contacting the server"),"error")},dataType:"json"})}).on("click.video.goanimate",'[data-action="wevideo-proceed-export"]',function(o){o.preventDefault();f("#wevideo-export").trigger("connectSuccess")});this.$el.on("click",'[data-action="vzaar-connect"]',function(p){var o=f(this);p.preventDefault();m.$el.find(".modal-content").addClass("authorizing");m.popWindow(o.data("url"))}).on("click",'[data-action="vzaar-authorize-cancel"]',function(o){o.preventDefault();m.$el.find(".modal-content").removeClass("authorizing")}).on("vzaarConnectError",function(p,o){m.alert(o.error,"error")});this.$el.on("click",'[data-action="vidyard-connect"]',function(q){var p=f(this),o=m.$el.find("#vidyard_token_in").val();q.preventDefault();m.$el.find(".modal-footer button.connect").addClass("disabled");f.ajax({type:"POST",url:p.data("remote"),data:{token:o},success:function(r){m.$el.find(".modal-footer button.connect").removeClass("disabled");if(r.error){m.alert(r.error,"error");return}else{if(r.message){m.alert(r.message)}}f("#vidyard-export").trigger("connectSuccess",[r])},error:function(){m.alert(GT.gettext("Error contacting the server"),"error");m.$el.find(".modal-footer button.connect").removeClass("disabled")}})}).on("click",".js-show-vidyard-tutorial",function(q){var r="https://web.archive.org/web/20160411231230/http://fast.wistia.net/embed/iframe/zo6nqx67j4?autoPlay=1&endVideoBehavior=reset",o=f("#video-modal-wistia"),p=f('<iframe class="embed-responsive-item" allowfullscreen></iframe>').attr("src",r);q.preventDefault();o.detach().appendTo("body").modal({keyboard:true,backdrop:true}).on("hidden.bs.modal",function(){o.find(".embed-player").empty()});o.find(".embed-player").empty().append(p)})};c.prototype=f.extend({},ModalBase.prototype,{popWindow:function(l){window.open(l,"_go_video_export","toolbar=no,status=no,height=650,width=960")},wistiaConnectSuccess:function(l){this.$el.find(".modal-body").addClass("authorized").find(".wistia-account-name").text(l.account_name)}});window.videoExportError=function(l){f("#youtube-export, #video-export").trigger("exportError",[l])};window.videoExportStarted=function(l){f("#youtube-export, #video-export").trigger("exportSuccess",[l])};window.wistiaConnectError=function(l){f("#wistia-export").trigger("connectError",[l])};window.wistiaConnectSuccess=function(l){f("#wistia-export").trigger("connectSuccess",[l])};window.vzaarConnectError=function(l){f("#vzaar-export").trigger("connectError",[l])};window.vzaarConnectSuccess=function(l){f("#vzaar-export").trigger("connectSuccess",[l])};window.vimeoConnectSuccess=function(l){f("#vimeo-export").trigger("connectSuccess",[l])};window.vimeoConnectError=function(l){f("#vimeo-export").trigger("connectError",[l])};window.lectoraConnectSuccess=function(l){f("#lectora-export").trigger("connectSuccess",[l])};window.lectoraConnectError=function(l){f("#lectora-export").trigger("connectError",[l])};var b=function(l){this.$el=l};b.prototype=f.extend({},ModalBase.prototype);var i=function(l){this.encryptedMovieId=l;this.slideAnimationPlaying=false;this.initElements();this.initEventListeners();this.videoCollaboration=new d();if(this.collaboratorsElem.length>0){this.updateCollaborators()}this.worknoteModule=null;this.isEditingVideoInfo=false;this._lastestRevision=null;this._activeRevision=null};i.prototype.initElements=function(){this.videoPageElem=f("#video-page");this.settingsSidebarElem=f("#video-page .sidebar");this.settingPanelsElem=this.settingsSidebarElem.find(".setting-panels");this.mainSettingPanelElem=this.settingPanelsElem.find(".main-panel");this.subSettingPanelElem=this.settingPanelsElem.find(".sub-panel");this.videoCopyingItemElem=this.mainSettingPanelElem.find(".item-copy");this.logoSettingItemElem=this.mainSettingPanelElem.find(".item-logo");this.historySettingItemElem=this.settingsSidebarElem.find("[data-action='video-revision']");this.notesSettingItemElem=this.mainSettingPanelElem.find(".item-notes");this.adminItemElem=this.mainSettingPanelElem.find(".item-admin");this.logoSettingPanelElem=this.subSettingPanelElem.find(".logo-panel");this.defaultLogoListElem=this.logoSettingPanelElem.find(".default-logo-list-container .logo-list");this.logoListContainerElem=this.logoSettingPanelElem.find(".logo-list-container");this.historySettingPanelElem=this.subSettingPanelElem.find(".history-panel");this.historyListContainerElem=this.historySettingPanelElem.find(".list-container");this.notesSettingPanelElem=this.subSettingPanelElem.find(".notes-panel");this.notesListContainerElem=this.notesSettingPanelElem.find(".list-container");this.adminPanelElem=this.subSettingPanelElem.find(".admin-panel");this.adminContainerElem=this.adminPanelElem.find(".list-container");this.panelTitleElem=this.subSettingPanelElem.find(".panel-title");this.videoDeletingItemElem=this.mainSettingPanelElem.find(".item-delete");this.videoInfoEditingButtonElem=this.videoPageElem.find('button[data-action="edit-video-info"]');this.collaboratorsElem=this.videoPageElem.find(".collaborators")};i.prototype.initEventListeners=function(){var l=this;f(document).on("playerApiReady",function(){l.playerApi=flashPlayerApi(f("#flash-player"));l.playerApi.bindPlayerEvents().reset()});this.videoPageElem.on("click",".toggle-sidebar",function(){f(this).toggleClass("active");l.videoPageElem.toggleClass("sidebar-on");if(!l.videoPageElem.hasClass("sidebar-on")){l.panelTitleElem.trigger("click")}}).on("click",'[data-action="edit-video-info"]',function(n){if(l.isEditingVideoInfo){return}if(isUsingLegacyPlayer()){flashPlayerApi(f("#flash-player")).pause()}else{var o=f(".video-player-viewport").data("h5VideoControl");if(o){o.isEditingVideoInfo=true;o.pause();o.controlElem.hide()}}l.videoPageElem.find(".video-info").addClass("editing").show();l.isEditingVideoInfo=true;n.stopImmediatePropagation();var p=function(r){var q=f(".video-info");if(!q.is(r.target)&&(q.has(r.target).length===0)){l.saveVideoInfo();f(document).off("click",p)}};f(document).on("click",p)}).on("click",'[data-action="video-edit"]',function(q){var p=f(this),n=ModalBase.ensure("video-edit"),o=n.data("videoEdit");if(!o){n.data("videoEdit",o=new b(n))}q.preventDefault();o.load(p.data("remote"))}).on("click","#add-message-button",function(){f(this).hide();l.videoPageElem.find("#add-message-box").removeClass("hide")}).on("click",".set-privacy",function(){l.setPrivacy(f(this).attr("data-privacy"))}).on("click",".url-social-sharing",function(n){n.preventDefault();n.stopImmediatePropagation();f.post("/ajax/updateMovieSettings",{sharing:f(this).hasClass("on")?"1":"0",enc_mid:l.encryptedMovieId,ct:f('input[name="ct"]').val()},function(o){if(o.error){showNotice(o.error,true);return}showNotice(GT.gettext("Sharing option changed"));l.toggleSharingUrlDisplay()},"json")});function m(){if(f(l.videoPageElem).find(".toggle-sidebar.active")[0]==null){f(l.videoPageElem).find(".toggle-sidebar").click()}if(f(l.historySettingPanelElem[0]).is(":hidden")){f(l.historySettingItemElem[0]).click()}}f("#autosave-overlay .history-toggle").click(m);f(document).on("click",function(n){f(".export-option").trigger("documentClicked",n)}).on("click",".js-show-revision-history",m).on("click",'[data-action="video-license"]',function(q){var p=f(this),n=ModalBase.ensure("video-license"),o=n.data("videoLicense");if(!o){n.data("videoLicense",o=new h(n));window.themeassetprovider_payment_confirm=function(r){o.paymentConfirmed(r)};n.scroll(function(){n.modal("handleUpdate")})}q.preventDefault();o.load(p.data("remote"))}).on("click",'[data-action="video-export"]',function(){var o=f(this),n=o.data("type"),p=o.data("videoExport");if(!p){o.data("videoExport",p=new k[n](o,l.encryptedMovieId))}p.start()}).on("submit","#movie-setting-form",function(n){n.preventDefault();l.saveVideoInfo()}).on("click",".sharing-button",function(){var n=f(this).data("shareTarget");amplitudeTrackShare(n,AMPLITUDE_EVENT_PROPERTIES.VIDEO_RESOLUTION_400,flashVar.duration,l.encryptedMovieId)}).on("click",".download-file-button, .download-modal-button",function(){var n=f(this);amplitudeTrackEvent(AMPLITUDE_EVENT.DOWNLOAD_FILE,{type:n.data("fileType"),resolution:n.data("resolution"),video_id:n.data("videoId")});amplitudeIncrementUserProperty(AMPLITUDE_USER_PROPERTY_KEYS.TOTAL_DOWNLOAD_VIDEOS,1)}).on("collaborator-change",function(){l.updateCollaborators()}).on("click",".js-manage-collaborators",function(r){var q=f(this),n=ModalBase.ensure("video-collaborator-manager"),p=n.data("videoCollaboratorManager"),o="/ajax/getCollaboratorsManager/"+l.encryptedMovieId;if(!p){n.data("videoCollaboratorManager",p=new j(n));n.scroll(function(){n.modal("handleUpdate")})}r.preventDefault();p.load(o)}).on("click",'[data-action="remove-conversion"]',function(q){q.preventDefault();var n=ModalBase.ensure("video-edit"),p=n.data("videoEdit"),o=f(this).data("video");f.post("/ajax/removePendingConversions/"+o,function(r){if(r.error){p.alert(r.error,"error")}else{p.alert("The conversion process has been cancelled. You can now edit your video. Re-start the conversion process to download/export the most recent version of your video.","success alert-icon");n.find("#video_enabled").show();n.find("#video_disabled").hide()}},"json")});f("#settings-sidebar-button").click(function(){f("#video-page .player-container .main").addClass("sidebar-on");f("#video-page .player-container .main").addClass("col-sm-7");l.settingsSidebarElem.removeClass("hide")});l.videoCopyingItemElem.on("click",function(){fullscreenStudio("/videomaker/full/copycheck/"+l.encryptedMovieId)});l.initDefaultLogos();l.logoSettingItemElem.on("click",function(){l.logoSettingPanelElem.show();l.historySettingPanelElem.hide();l.notesSettingPanelElem.hide();l.adminPanelElem.hide();l.getLogos();l.slideSettingPanel(true)});l.historySettingItemElem.on("click",function(){l.logoSettingPanelElem.hide();l.historySettingPanelElem.show();l.notesSettingPanelElem.hide();l.adminPanelElem.hide();l.getRevisionHistory();l.slideSettingPanel(true)});l.notesSettingItemElem.on("click",function(){l.logoSettingPanelElem.hide();l.historySettingPanelElem.hide();l.notesSettingPanelElem.show();l.adminPanelElem.hide();l.getNotes(f(this).data("accessId"));l.slideSettingPanel(true)});l.adminItemElem.on("click",function(){l.logoSettingPanelElem.hide();l.historySettingPanelElem.hide();l.notesSettingPanelElem.hide();l.adminPanelElem.show();l.slideSettingPanel(true)});l.panelTitleElem.on("click",function(){l.logoSettingPanelElem.hide();l.historySettingPanelElem.hide();l.notesSettingPanelElem.hide();l.adminPanelElem.hide();l.slideSettingPanel(false);l.loadLatestVideo(false)});l.videoDeletingItemElem.on("click",function(){if(!confirm(GT.gettext("Are you sure you want to delete this video?"))){return}amplitudeIncrementUserProperty(AMPLITUDE_USER_PROPERTY_KEYS.TOTAL_SAVED_VIDEOS,-1);amplitudeTrackEvent(AMPLITUDE_EVENT.DELETED_VIDEO);f.post("/ajax/deleteMovie/"+l.encryptedMovieId,{ct:f('input[name="ct"]').val()},function(n){parseResponse(n);if(responseArray.code=="0"){window.location=responseArray.json.url}else{showNotice(responseArray.json.error,true)}resetResponse()})});l.settingsSidebarElem.on("click",'[data-action="video-export-modal"]',function(q){var p=f(this),o=ModalBase.ensure("video-export"),r=o.data("videoExport"),n=p.data("export-target");q.preventDefault();if(!p.hasClass("download")&&!p.hasClass("youtube")&&p.hasClass("disabled")){return}if(!r){o.data("videoExport",r=new VideoExportModal(o))}r.load(p.data("remote"))})};i.prototype.saveVideoInfo=function(){if(!this.isEditingVideoInfo){return}this.videoPageElem.find(".video-info").removeClass("editing");this.isEditingVideoInfo=false;var p=f(".video-player-viewport").data("h5VideoControl");if(p){p.isEditingVideoInfo=false;p.controlElem.show()}var o=f('input[name="title"]').val();var m=f('textarea[name="desc"]').val();var n=f(".non-edit-fields .title");var l=f(".non-edit-fields .description");if((n.text()==o)&&(l.text()==m)){return}n.text(o);l.html(a(g(m)));f.post("/ajax/updateMovieSettings",{title:o,desc:m,enc_mid:f('input[name="enc_mid"]').val(),ct:f('input[name="ct"]').val()},function(q){if(q.video){f(".non-edit-fields .title").text(q.video.title);f(".non-edit-fields .description").html(a(g(q.video.description)))}})};i.prototype.slideSettingPanel=function(m){var l=this;if(!l.slideAnimationPlaying){l.slideAnimationPlaying=true;l.settingPanelsElem.animate({marginLeft:m?"-100%":"0"},200,function(){l.slideAnimationPlaying=false})}};i.prototype.initDefaultLogos=function(){var l=this;this.defaultLogoListElem.on("click","li",function(o){o.preventDefault();var n=f(this);var m=n.data("watermark");if(n.hasClass("selected")){return}f.post("/ajax/assignwatermark/movie/"+l.encryptedMovieId+"/"+m,function(p){if(p.error){showNotice(p.error,true)}else{l.logoSettingPanelElem.find("[data-watermark]").removeClass("selected");n.addClass("selected");showNotice(p.message);resetPreview()}},"json")})};i.prototype.getLogos=function(){var l=this;l.logoListContainerElem.empty();f.ajax({url:"/ajax/getUserLogoJson/"+l.encryptedMovieId,type:"post",dataType:"json",success:function(n){var q=n.list,m=n.using;var p=q.length;var o=f("<ul></ul>").addClass("logo-list");f.each(q,function(r,t){var s=f("<img />").attr("src",t.url);var u=f('<li data-watermark="'+t.encryptedId+'"></li>').append(s);u.on("click",function(){var v=f(this);if(v.hasClass("selected")){return}var w=f(".video-player-viewport").data("h5VideoControl");w.showLoading();f.post("/ajax/assignwatermark/movie/"+l.encryptedMovieId+"/"+t.encryptedId,function(x){if(x.error){w.hideLoading();showNotice(x.error,true)}else{l.logoSettingPanelElem.find("[data-watermark]").removeClass("selected");v.addClass("selected");showNotice(x.message);resetPreview()}},"json")});o.append(u)});l.logoListContainerElem.append(o);l.logoSettingPanelElem.find("[data-watermark="+m+"]").addClass("selected")}})};i.prototype.loadVideoByRevision=function(m,p){p=!!p;var l=this;if(isUsingLegacyPlayer()){return}var r=f(".video-player-viewport").data("h5VideoControl");var o=(m.type==="current")?GT.gettext("Loading latest version"):GT.strargs("Retrieving revision from %1",[m.EST]);var n=(m.type==="autosave");r.reset();r.showLoading(o);var q={movieId:this.encryptedMovieId,ts:m.timestamp};f.post("/ajax/getH5CompiledVideoPath",q).done(function(s){var u=s.url;if(u){var t=f("#h5-player");t.removeAttr("src").empty().append(f("<source>").attr("src",u));if(p){t.get(0).play()}else{r.hideLoading()}}else{resetPreview(m.timestamp,p,n)}l._activeRevision=m})};i.prototype.loadLatestVideo=function(l){if(this._activeRevision!==this._lastestRevision){this.loadVideoByRevision(this._lastestRevision,l)}};i.prototype.getRevisionHistory=function(){var l=this;this.historyListContainerElem.empty();f.ajax({url:"/ajax/getMovieRevisionList/"+l.encryptedMovieId,type:"post",dataType:"json"}).done(function(n){var m=f("<ul></ul>").addClass("history-list");f.each(n,function(r,q){var u=f("<li></li>");if(q.type==="current"){l._lastestRevision=q;l._activeRevision=q;u.addClass("current latest")}u.append(f("<div></div>").text(q.EST).addClass("saved-time"));var o;if(q.type==="autosave"){o=GT.gettext("Autosave")}else{o=GT.gettext("Manual save")+" | "+q.save_by}u.append(f("<div></div>").text(o).addClass("saved-by"));var s=f("<span></span>").addClass("edit-button glyph-pro glyph-pencil");var t=f("<span></span>").addClass("copy-button glyph-pro glyph-more-items");var p=f("<div></div>").addClass("button-container").append(s).append(t);u.append(p);m.append(u);s.on("click",function(){if(q.type==="autosave"){window.location="/videomaker/full/editasrevision/"+l.encryptedMovieId+"/"+q.timestamp}else{window.location="/videomaker/full/editrevision/"+l.encryptedMovieId+"/"+q.timestamp}}).attr("title",GT.gettext("Edit this revision")).tooltip({placement:"bottom"});t.on("click",function(){if(q.type==="autosave"){window.location="/videomaker/full/copyasrevision/"+l.encryptedMovieId+"/"+q.timestamp}else{window.location="/videomaker/full/copyrevision/"+l.encryptedMovieId+"/"+q.timestamp}}).attr("title",GT.gettext("Make a copy")).tooltip({placement:"bottom"});u.on("click",function(v){v.preventDefault();if(f(this).hasClass("current")){return}f(this).addClass("current").siblings().removeClass("current");l.loadVideoByRevision(q,true);amplitudeTrackEvent(AMPLITUDE_EVENT.REVISION_HISTORY,{video_id:l.encryptedMovieId})})});l.historyListContainerElem.append(m)})};i.prototype.getNotes=function(l){if(!this.worknoteModule){this.worknoteModule=new WorknoteModule(this.encryptedMovieId,l,this.notesListContainerElem,e)}this.worknoteModule.load()};i.prototype.updateCollaborators=function(){var l=this;f.post("/ajax/getCollaborators/"+this.encryptedMovieId,function(m){l.collaboratorsElem.html(m).find('.avatar, [rel="tooltip"]').tooltip({container:".sharing .collaborators"})})};i.prototype.setPrivacy=function(m){var l=this;var n={enc_mid:this.encryptedMovieId,privacy:m,ct:f('input[name="ct"]').val()};f.post("/ajax/updateMovieSettings",n,function(o){if(o.error){showNotice(o.error,true)}else{var p=o.video.status;l.showPrivacy(p);f('input[name="movie-privacy"]').val(p);showNotice(GT.gettext("Privacy changed"))}},"json")};i.prototype.showPrivacy=function(l){this.videoPageElem.find(".privacy").removeClass("draft private public").addClass(l)};i.prototype.toggleSharingUrlDisplay=function(){this.videoPageElem.find(".url-social-sharing").toggleClass("hidden")};f(document).ready(function(){e=f('input[name="ct"]').val();f(".socials-sharing > li > a").tooltip()});window.VideoPage=i;function a(m){var l="<br>";return(m+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+l+"$2")}function g(l){return document.createElement("a").appendChild(document.createTextNode(l)).parentNode.innerHTML}})(jQuery);var URL_REJECT_MOVIE="/ajax/rejectMovie",URL_TOGGLE_EMBED="/ajax/toggleEmbed";function rejectMovie(b){var c="Are you sure you want to reject this video?";if(!confirm(c)){return}var a=URL_REJECT_MOVIE+"/"+b;jQuery.post(a,function(d){parseResponse(d);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+"Video has been rejected")}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()})}function enableEmbed(a){toggleEmbed(a,true)}function disableEmbed(a){toggleEmbed(a,false)}function toggleEmbed(a,c){var b=URL_TOGGLE_EMBED+"/"+a;jQuery.post(b,{enable:c},function(d){parseResponse(d);if(responseArray.code==="0"){$('[data-action="disable-embed"]').toggleClass("hidden",!c);$('[data-action="enable-embed"]').toggleClass("hidden",c);displayFeedback(responseArray.code+"Embed code for this user has been "+(c?"enabled":"disabled"))}else{displayFeedback(responseArray.code+responseArray.json.error)}})}var VideoExportModal=function(a,b){var c=this;this.$el=a;this.options=b;this.$el.on("click.video.goanimate","[data-video-export]",function(g){var f=$(this),h=f.attr("href"),d=$('input[name="ct"]').val();g.preventDefault();h=h+"&ct="+encodeURIComponent(d);if(f.data("videoExport")=="youtube"){c.popWindow(h)}else{c.requestExport(h)}}).on("exportError",function(f,d){c.alert(d.error,"error")}).on("exportSuccess",function(f,d){c.requestSuccess(d)})};VideoExportModal.prototype=$.extend({},ModalBase.prototype,{popWindow:function(a){window.open(a,"_go_video_export","toolbar=no,status=no,height=650,width=960")},requestExport:function(a){var b=this;$.get(a,function(c){if(c.error){b.alert(c.error,"error");return}b.requestSuccess(c)},"json").fail(function(c){b.alert("Error contacting server ("+c.status+"). Please try again later / reload the page.","error")})},requestSuccess:function(b){var a=" a.btn[data-video-export='"+b.type+"']";var d;switch(b.type){case"h5":case"h5presentation":d=GT.gettext("Processing (Beta)");break;default:d=GT.gettext("Processing");break}var c='<span class="btn btn-lg btn-dark">'+d+"...</span>";if(b.resolution){this.$el.find("."+b.resolution+a).replaceWith(c);switch(b.type){case"youtube":this.alert(GT.gettext("Your video is being converted and will be exported to YouTube. You can close this window."));break;default:this.alert(GT.gettext("You will receive an email once your video is ready for download. You can close this window."))}}}});window.isUserOptOutH5Preview=function(){var a=window.localStorage.getItem(PreviewPlayerConstants.USE_H5_PREVIEW_PREFERENCE_KEY);return(a===PreviewPlayerConstants.USER_OPT_OUT)};window.isUsingLegacyPlayer=function(){return $(".video-player-viewport").hasClass("using-flash")};window.resetPreview=function(c,b,a){if(previewPlayer===undefined){setupPreviewPlayer()}loadH5Preview(c,b,a)};

}
/*
     FILE ARCHIVED ON 23:12:30 Apr 11, 2016 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:27:12 Feb 27, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 95.373
  exclusion.robots: 0.108
  exclusion.robots.policy: 0.099
  RedisCDXSource: 4.7
  esindex: 0.011
  LoadShardBlock: 64.57 (3)
  PetaboxLoader3.datanode: 66.146 (4)
  CDXLines.iter: 23.565 (3)
  load_resource: 33.545
  PetaboxLoader3.resolve: 24.541
*/